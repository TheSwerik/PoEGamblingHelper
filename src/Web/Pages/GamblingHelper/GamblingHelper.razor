@page "/"
@using PoEGamblingHelper.Web.Pages.GamblingHelper.Components.Filter
@using PoEGamblingHelper.Web.Shared.Util
@using PoEGamblingHelper.Web.Pages.GamblingHelper.Components

<PageTitle>Gambling Helper</PageTitle>

<div class="d-flex flex-column align-items-center w-100 h-100 pt-5">
    <img class="mt-3" style="margin-bottom: -20px; width:88px" src="icon.png" alt="icon"/>
    <div class="d-flex align-content-end">
        <h2>Path</h2>
        <h4>of</h4>
        <h2>Exile</h2>
    </div>
    <h1 class="mb-5">GAMBLING HELPER</h1>

    <Filter TempleCost="_templeCost" FilterModel="_filterModel" OnFilterValuesChanged="OnFilterValuesChanged" CurrentLeague="_currentLeague" Currency="_currency"/>

    @if (UpdateService.IsUpdating() || _firstLoad)
    {
        <div class="spinner-border mt-3" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    }
    else
    {
        <InfiniteScrolling OnScrollToBottom="OnScrollToBottom"></InfiniteScrolling>
        <div class="container d-flex flex-wrap p-0 justify-content-between">
            @foreach (var gem in _gems)
            {
                <GemStats GemData="@gem" TempleCost="@_templeCost" FilterModel="@_filterModel" CurrentLeague="@_currentLeague"/>
            }
        </div>
        @if (!_isOnLastPage)
        {
            <div class="spinner-border mb-5" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        }
    }
</div>